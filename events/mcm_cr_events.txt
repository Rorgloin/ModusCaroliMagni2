###########################################
#                                         #
# Carolingian Renaissance Events          #             
#                                         #
# ID cr 0001-                             #
#                                         #
###########################################

# Written by BGG
namespace = cr
##################################
# Carolingian Renaissance 0001-1000
##################################

#The Carolingian Renaissance begins 
narrative_event = {
	id = cr.0001
	title = EVTTITLE_cr_0001
	desc = EVTDESCcr_0001
	picture = GFX_evt_garden
	border = GFX_event_narrative_frame_diplomacy
	
	trigger = {
		has_character_flag = is_charlemagne
		has_landed_title = e_karling 
		NOT = {
		has_character_flag = cr_starts
		}
		
			}
	
	mean_time_to_happen = {
		days = 1
	}
	
	
	option = { #OK
		name = OK
		set_character_flag = cr_starts
		character_event = { id = cr.0002 days = 50 }
			}
	option = {
		name = EVTOPTB_cr_0001
		prestige = -25
	}
}
narrative_event = {
	id = cr.0002
	title = EVTTITLE_cr_0002
	desc = EVTDESCcr_0002
	picture = GFX_evt_council_around_table
	border = GFX_event_narrative_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
	name = EVTOPTA_cr_0002
	custom_tooltip = { text = courtiers_invited}
	set_global_flag = carolingian_renaissance
	}
}
###################################
# Courtiers 0001-0020
###################################

# Paulinus II of Aquileia
narrative_event = {
	id = cr.0003
	title = EVTTITLE_cr_0003
	desc = EVTDESCcr_0003
	picture = GFX_evt_emissary

	capable_only = yes
	prisoner = no
	
	trigger = {
		has_dlc = "Charlemagne"
		religion_group = christian
		has_character_flag = is_charlemagne
		independent = yes
		has_global_flag = carolingian_renaissance
		NOT = {
		has_global_flag = paulinus_arrives
		}
		year = 774
	}
	
	mean_time_to_happen = {
		days = 1
	}
	
	immediate = {
		set_global_flag = paulinus_arrives
	}
	
	option = {
		ai_chance = {
		factor = 1000
		}
		name = EVTOPTA_cr_0003
		custom_tooltip = { text = paulinus_arrives }
		hidden_tooltip = {
			create_character = {
				random_traits = no
				dynasty = 1042142
				religion = ROOT
				culture = italian
				age = 25
				trait = martial_cleric
				trait = quick
				trait = theologian
				trait = diligent
				trait = zealous
					attributes = {
					diplomacy = 11
					martial = 6
					stewardship = 8
					intrigue = 3
					learning = 10
				}
			}
		}
		new_character = {
			set_name = Paulinus II
				opinion = {
				modifier = opinion_loyal_servant
				who = ROOT
				years = 100
			}
			}
	}
	option = {
		ai_chance = {
		factor = 0
		}
		name = EVTOPTB_cr_0003
		prestige = -5
	}
}

# Einhard

narrative_event = {
	id = cr.0004
	title = EVTTITLE_cr_0004
	desc = EVTDESCcr_0004
	picture = GFX_evt_emissary

	capable_only = yes
	prisoner = no
	
	trigger = {
		has_dlc = "Charlemagne"
		religion_group = christian
		has_character_flag = is_charlemagne
		independent = yes
		has_global_flag = carolingian_renaissance
		NOT = {
		has_global_flag = einhard_arrives
		}
		year = 791
	}
	
	mean_time_to_happen = {
		days = 1
	}
	
	immediate = {
		set_global_flag = einhard_arrives
		character_event = { id = cr.0021 days = 50 }
	}
	
	option = {
		ai_chance = {
		factor = 1000
		}
		name = EVTOPTA_cr_0004
		custom_tooltip = { text = einhard_arrives }
		hidden_tooltip = {
			create_character = {
				random_traits = no
				dynasty = 0
				religion = ROOT
				culture = old_frankish
				age = 16
				trait = charismatic_negotiator
				trait = scholar
				trait = poet
				trait = gregarious
				attributes = {
					diplomacy = 12
					martial = 5
					stewardship = 7
					intrigue = 4
					learning = 11
				}
			}
		}
		new_character = {
			set_name = Einhard
				opinion = {
				modifier = opinion_loyal_servant
				who = ROOT
				years = 100
			}
			}
	}
	option = {
		ai_chance = {
		factor = 0
		}
		name = EVTOPTB_cr_0004
		prestige = -5
	}
}

# Peter of Pisa 

narrative_event = {
	id = cr.0005
	title = EVTTITLE_cr_0005
	desc = EVTDESCcr_0005
	picture = GFX_evt_emissary

	capable_only = yes
	prisoner = no
	
	trigger = {
		has_dlc = "Charlemagne"
		religion_group = christian
		has_character_flag = is_charlemagne
		independent = yes
		has_global_flag = carolingian_renaissance
		NOT = {
		has_global_flag = peterpisa_arrives
		}
		year = 776
	}
	
	mean_time_to_happen = {
		days = 1
	}
	
	immediate = {
		set_global_flag = peterpisa_arrives
	}
	
	option = {
		ai_chance = {
		factor = 1000
		}
		name = EVTOPTA_cr_0005
		custom_tooltip = { text = peter_arrives }
		hidden_tooltip = {
			create_character = {
				random_traits = no
				dynasty = 1042141
				religion = ROOT
				culture = italian
				age = 32
				trait = scholar
				trait = patient
				trait = poet
				trait = scholarly_theologian
				attributes = {
					diplomacy = 10
					martial = 6
					stewardship = 7
					intrigue = 2
					learning = 15
				}
			}
		}
		new_character = {
			set_name = Peter
				opinion = {
				modifier = opinion_loyal_servant
				who = ROOT
				years = 100
			}
			}
	}
	option = {
		ai_chance = {
		factor = 0
		}
		name = EVTOPTB_cr_0005
		prestige = -5
	}
}

# Alcuin

narrative_event = {
	id = cr.0006
	title = EVTTITLE_cr_0006
	desc = EVTDESCcr_0006
	picture = GFX_evt_emissary

	capable_only = yes
	prisoner = no
	
	trigger = {
		has_dlc = "Charlemagne"
		religion_group = christian
		has_character_flag = is_charlemagne
		independent = yes
		has_global_flag = carolingian_renaissance
		NOT = {
		has_global_flag = alcuin_arrives
		}
		year = 776
	}
	
	mean_time_to_happen = {
		days = 1
	}
	
	immediate = {
		set_global_flag = alcuin_arrives
	}
	
	option = {
		ai_chance = {
		factor = 1000
		}
		name = EVTOPTA_cr_0006
		custom_tooltip = { text = alcuin_arrives }
		hidden_tooltip = {
			create_character = {
				random_traits = no
				dynasty = 100057
				religion = ROOT
				culture = saxon
				age = 46
				trait = mastermind_theologian
				trait = genius
				trait = scholar
				trait = homosexual
				trait = celibate
				trait = sympathy_pagans
				trait = kind
				trait = diligent
				attributes = {
					diplomacy = 9
					martial = 5
					stewardship = 8
					intrigue = 5
					learning = 18
				}
			}
		}
		new_character = {
			set_name = Alcuin
				opinion = {
				modifier = opinion_loyal_servant
				who = ROOT
				years = 100
			}
			}
	}
	option = {
		ai_chance = {
		factor = 0
		}
		name = EVTOPTB_cr_0006
		prestige = -5
	}
}

# Paul the Deacon

narrative_event = {
	id = cr.0007
	title = EVTTITLE_cr_0007
	desc = EVTDESCcr_0007
	picture = GFX_evt_emissary

	capable_only = yes
	prisoner = no
	
	trigger = {
		has_dlc = "Charlemagne"
		religion_group = christian
		has_character_flag = is_charlemagne
		independent = yes
		has_global_flag = carolingian_renaissance
		NOT = {
		has_global_flag = thedeacon_arrives
		}
		year = 776
	}
	
	mean_time_to_happen = {
		days = 1
	}
	
	immediate = {
		set_global_flag = thedeacon_arrives
	}
	
	option = {
		ai_chance = {
		factor = 1000
		}
		name = EVTOPTA_cr_0007
		custom_tooltip = { text = paul_arrives }
		hidden_tooltip = {
			create_character = {
				random_traits = no
				dynasty = 9555
				religion = ROOT
				culture = lombard
				give_nickname = nick_the_deacon
				age = 56
				trait = mastermind_theologian
				trait = scholar
					attributes = {
					diplomacy = 6
					martial = 4
					stewardship = 9
					intrigue = 3
					learning = 12
				}
			}
		}
		new_character = {
			set_name = Paul
				opinion = {
				modifier = opinion_loyal_servant
				who = ROOT
				years = 100
			}
			}
	}
	option = {
		ai_chance = {
		factor = 0
		}
		name = EVTOPTB_cr_0007
		prestige = -5
	}
}

# Odo of Metz

narrative_event = {
	id = cr.0008
	title = EVTTITLE_cr_0008
	desc = EVTDESCcr_0008
	picture = GFX_evt_emissary

	capable_only = yes
	prisoner = no
	
	trigger = {
		has_dlc = "Charlemagne"
		religion_group = christian
		has_character_flag = is_charlemagne
		independent = yes
		has_global_flag = carolingian_renaissance
		NOT = {
		has_global_flag = odometz_arrives
		}
		e_karling = {
		90 = {
		is_capital = yes 
		}
		}
		}
	
	mean_time_to_happen = {
		days = 1
	}
	
	immediate = {
		set_global_flag = odometz_arrives
	}
	
	option = {
		ai_chance = {
		factor = 1000
		}
		name = EVTOPTA_cr_0008
		custom_tooltip = { text = odo_arrives }
		hidden_tooltip = {
			create_character = {
				random_traits = no
				dynasty = 1042140
				religion = ROOT
				culture = armenian
				age = 30
				trait = architect
				trait = administrator
				trait = thrifty_clerk
				trait = clerk
					attributes = {
					diplomacy = 7
					martial = 6
					stewardship = 13
					intrigue = 7
					learning = 8
				}
			}
		}
		new_character = {
			set_name = Odo
			has_character_flag = is_odo
				opinion = {
				modifier = opinion_loyal_servant
				who = ROOT
				years = 100
			}
			}
	}
	option = {
		ai_chance = {
		factor = 0
		}
		name = EVTOPTB_cr_0008
		prestige = -5
	}
}

narrative_event = {
	id = cr.0009
	title = EVTTITLE_cr_0009
	desc = EVTDESCcr_0009
	picture = GFX_evt_emissary

	capable_only = yes
	prisoner = no
	
	trigger = {
		has_dlc = "Charlemagne"
		religion_group = christian
		has_character_flag = is_charlemagne
		independent = yes
		has_global_flag = carolingian_renaissance
		NOT = {
		has_global_flag = angilbert_arrives
		}
		year = 776
			}
	
	mean_time_to_happen = {
		days = 1
	}
	
	immediate = {
		set_global_flag = angilbert_arrives
	}
	
	option = {
		ai_chance = {
		factor = 1000
		}
		name = EVTOPTA_cr_0009
		custom_tooltip = { text = angilbert_arrives }
		hidden_tooltip = {
			create_character = {
				random_traits = no
				dynasty = lowborn
				religion = ROOT
				culture = old_frankish
				age = 16
				trait = charismatic_negotiator
				trait = lustful
				trait = poet
					attributes = {
					diplomacy = 12
					martial = 8
					stewardship = 8
					intrigue = 8
					learning = 8
				}
			}
		}
		new_character = {
			set_name = Angilbert
				opinion = {
				modifier = opinion_loyal_servant
				who = ROOT
				years = 100
			}
			}
	}
	option = {
		ai_chance = {
		factor = 0
		}
		name = EVTOPTB_cr_0009
		prestige = -5
	}
}

############################
# Courtier Events 0021-
############################

# Einhard befriends Charlemagne

character_event = {
	id = cr.0021
	
	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = {
		has_dlc = "Charlemagne"
		liege = {
			has_character_flag = is_charlemagne
			NOT = {	is_friend = ROOT }
		}
	}
	
	immediate= {
		liege = {
			character_event = { id = cr.0022 }
		}
	}
}

character_event = {
	id = cr.0022
	desc = EVTDESCcr_0022
	picture = GFX_evt_courtiers_talking
	
	is_triggered_only = yes
	
	option = {
	ai_will_do = {
	factor = 1000
	}
	name = EVTOPTA_cr_0022
	add_friend = FROM
	}
	option = {
	ai_will_do = {
	factor = 0
	}
	name = EVTOPTB_cr_0022
	
	}

}

# insert after charlemagne's death event, 0023-0025 reserved

#Odo of Metz

#Odo offers to build a palace at Aachen

character_event = {
	id = cr.0026
	desc = EVTDESCcr_0026
	picture = GFX_stone_church_soa
	border = GFX_event_narrative_frame_diplomacy
	
	trigger = {
		has_character_flag = is_charlemagne
		has_global_flag = odometz_arrives
		e_karling = {
		90 = {
		is_capital = yes 
		}
		}
		NOT = {
		has_global_flag = aachen_keep_built
		}
			}
	
	mean_time_to_happen = {
		days = 1
	}
	
	
	option = { #Build a grand keep
		trigger = {
		wealth = 50
		}
		name = EVTOPTAcr_0026
		b_julich = {
		add_building = ca_keep_2
		}
		set_global_flag = aachen_keep_built
		wealth = -50
		
		ai_will_do = {
		factor = 10000
		}
		}
	option = { #I can't afford that 
		name = EVTOPTBcr_0026
		any_courtier = {
		has_character_flag = is_odo
		opinion = {
		modifier = unhappy
		who = ROOT 
		years = 1
		}
		}
		ai_will_do = {
		factor = 1
		}
		}
	}
	

	
}

